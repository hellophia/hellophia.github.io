<html>
<head>
	<style>
		
		@import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');
		
		body {
			font-family: "VT323";
			font-size: 34px;
			background-color:black;
			padding:3% 5%;
			transform-style: preserve-3d;
		}
		
		.textholder {
			color: #433047;
			background-color:#d4dff9;
			font-size:1em;
			padding:3% 5%;
			height:300px;
		}
		
		.field{
			display: inline-block;
			width:100px;
			font-size: .8em;
			color:#fffffb;
			border-radius:8px;
			margin: 0px 4px;
			text-align:center;
			transform:translateZ(1px);
		}
		
		.empty {
			height: .8em;
			border:1px solid black;
			transform: translateY(4px);
			transform:translateZ(1px);
		}
		
		.filled-border{
			display:inline-block;
			background-color: #c1b784;
			border:2px solid #c1b784;
			margin: 0px 10px;
			box-shadow: 0px 1px 1px #999c85;
		}
		
		.filled {
			border-radius:8px;
			background-color: #68443b;
			margin:0;
		}
		
		.word{
			cursor: grab;
		}
		
		.name{
			background-color: #68443b;
		}
		
		.noun{
			background-color: #8f7b42;
		}
		
		.dragging {
			opacity:0;
		}
		
		.ghost{
			position:absolute;
			top:-1000px;
		}
		
		.darken {
			background-image: linear-gradient(rgba(0, 0, 0, 0.3),rgba(0, 0, 0, 0.3))
		}
		
		.bottomholder{
			display:flex;
			background-color:#0c1408;
			padding:8px;
			box-sizing: content-box;
			height:100px;
		}
		
		.gotwordsholder{
			color:#858692;
			flex-basis:10%;
			text-align:right;
		}
		
		.border{
			position:relative;
			border-width: 2px;
			border-style: solid;
			border-color: #7b7355 #918e73 #918e73 #7b7355;
		}
		
		.border::after{
  		  content: "";
  		  position: absolute;
  		  top: 0;
  		  left: 0;
		  right:0;
		  bottom:0;
		  margin:-4px;
		  border-width: 2px;
		  border-style: solid;
		  border-color: #918e73 #7b7355 #7b7355 #918e73;
		}
		
		.scrollnotes{
			background-color:#25243a;
			text-align:center;
			color:#fffeff;
			font-size:.8em;
		}
		
		.exploringthinking{
			position:absolute;
			top:0;
			left:0;
			color:#b8bb7a;
			background-color:#25243a;
			font-size:.8em;
			display:inline;
		}
		
		.exploringthinking:hover{
			color:#e6eaa0;
		}
		
	</style>
</head>
<body>
	
	<div style="display:flex;">
		<div style="display:flex;flex-direction:column;flex-grow:1;flex-basis:0;">
			<div class="scrollnotes border">The scroll is not filled in.</div>
			<div class="textholder border">
				<span class="field empty name" id="Albert"></span><span class="field empty name" id="Cloudsley"></span> pushed <span class="field empty name" id="Oberon"></span><span class="field empty name" id="Geller"></span> from a cliff in the <span class="field empty noun" id="Horn"></span> of <span class="field empty noun" id="Thumb"></span> on Monkey Paw Island.
			</div>
		</div>
		<div class="border" style="flex-grow:1;flex-basis:0;">
			testing...
		</div>
	</div>

	
	<div class="bottomholder border" id="bottomholder">
		<div id="wordholder" style="flex-grow: 1;"></div>
		<div class="gotwordsholder" id="gotwordsholder"><span id="gotwordsnum"></span>/<span id="maxgotwords"></span></div>
	</div>
	
	<div class="exploringthinking border" id="exploringthinking">Exploring <span id="arrow">‚üª</span> Thinking</div>
	
	<script>
		
		const worddata = [
			{
				"word": "Albert",
				"type": "name",
				"found": false
			},
			{
				"word": "Cloudsley",
				"type": "name",
				"found": true
			},
			{
				"word": "Oberon",
				"type": "name",
				"found": true
			},
			{
				"word": "Geller",
				"type": "name",
				"found": false
			},
			{
				"word": "Horn",
				"type": "noun",
				"found": true
			},
			{
				"word": "Thumb",
				"type": "noun",
				"found": false
			}
		]

		const holes = document.querySelectorAll('.empty');
		var bottomholder = document.getElementById('bottomholder');
		var expthink = document.getElementById('exploringthinking');
		var wordholder = document.getElementById('wordholder');
		var gotwordsholder = document.getElementById('gotwordsholder');
		var gotwordsnumholder = document.getElementById('gotwordsnum');
		var maxgotwordsholder = document.getElementById('maxgotwords');
		var gotwordsnum = 0;
		var maxgotwords = worddata.length;
		var dragged = null;
		
		var bottomrect = bottomholder.getBoundingClientRect();
		var bottomwidth = Math.round(bottomrect.width);
		var bottomheight = Math.round(bottomrect.height);
		var expthinkrect = expthink.getBoundingClientRect();
		var expthinkwidth = Math.round(expthinkrect.width);
		var expthinkheight = Math.round(expthinkrect.height);
		expthink.style.top = (Math.round((bottomrect.top) - (expthinkheight))-13).toString() + "px"
		expthink.style.left = (Math.round((bottomrect.left) + (.5 * bottomwidth) - (.5 * expthinkwidth))-8).toString() + "px"
		
		worddata.forEach((word) => {
			if(word.found === true){
				var newword = document.createElement("span");
				newword.classList.add("field","word");
				newword.classList.add(word.type);
				newword.textContent = word.word;
				newword.draggable = true;
				wordholder.appendChild(newword);
		        newword.addEventListener('dragstart', dragStart);
		        newword.addEventListener('dragend', dragEnd);
				gotwordsnum++;
			}
		});
		
	    holes.forEach(hole => {
	        hole.addEventListener('dragover', dragOver);
	        hole.addEventListener('drop', drop);
	    });
		
		maxgotwordsholder.textContent = maxgotwords.toString();
		gotwordsnumholder.textContent = gotwordsnum.toString();

	    function dragStart(event) {
			const nameghost = document.createElement("span");
			nameghost.classList.add("field","word","darken");
			if (event.target.classList.contains("name")){
				nameghost.classList.add("name");
			}
			else if (event.target.classList.contains("noun")){
				nameghost.classList.add("noun");
			}
			nameghost.id = "ghost";
			nameghost.classList.add("ghost");
			nameghost.textContent = event.target.textContent;
			document.body.appendChild(nameghost);
			event.dataTransfer.setDragImage(nameghost, 0, 0);
			event.target.classList.add('dragging');
			dragged = event.target;
	    }

	    function dragEnd(event) {
			event.target.classList.remove('dragging');
			var ghost = document.getElementById("ghost");
			if (ghost.parentNode) {
				ghost.parentNode.removeChild(ghost);
			}
	    }

	    function dragOver(event) {
	        event.preventDefault();
	    }
		
	    function drop(event) {
	        event.preventDefault();
			
			console.log(dragged);
			
			if (event.target.id === dragged.textContent){
				event.target.className = '';
				event.target.classList.add("filled-border");
				const filled = document.createElement("span");
				filled.classList.add("field","filled");
				if (dragged.classList.contains("name")){
					filled.classList.add("name");
				}
				else if (dragged.classList.contains("noun")){
					filled.classList.add("noun");
				}
				filled.textContent = dragged.textContent;
				event.target.appendChild(filled);
			    event.target.removeEventListener('dragover', dragOver);
			    event.target.removeEventListener('drop', drop);
			
				dragged.remove();
			}
	    }
		
		/*
		
		todo
		
		rotate arrow for exploring thinking
		
		make exploring thinking change opacity on thinking container
		
		create exploring container with underlined words
		
		mark words as found when found
		
		work on being able to continue to move words around
		
		check accuracy when filled out
		
		lock in when correctly filled out
		
		*/
		
	</script>
	
</body>
</html>