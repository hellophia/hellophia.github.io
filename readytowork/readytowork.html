<!DOCTYPE html>
<html>
<head>
    <title>jobsites</title>
    <style>
	
		@import url('https://fonts.googleapis.com/css2?family=Noto+Serif&display=swap');
		
		body {
		  	font-size: 14px;
		  	font-family: "Noto Serif";
		  	background-color: #212121;
			width:80%;
			margin:auto;
		}
		
		h2{
			color: #e3e3e3;
		}
		p{
			color: #e3e3e3;
		}
		
        #map {
            height: 400px;
            width: 100%;
			margin: 20px auto;
        }
		#tags {
			display: flex;
			flex-wrap: wrap;
			justify-content: space-between;
		}
	    input[type="checkbox"] {
	      width: 20px;
	      height: 20px;
		  margin-right:6px;
		  vertical-align: middle;
	    }
		label{
			margin-left:16px;
			color: #e3e3e3;
			display: inline-block;
			white-space: nowrap;
			flex: 0 0 20%;
		}
	    button{
	  	  font-family: "Noto Serif";
	  	  background-color: #d3c8c3;
	  	  color: #303028;
	  	  border:none;
	  	  margin:6px;
		  font-size: 14px;
		  border-radius: 16px;
		  padding: 8px;
		  cursor:pointer;
	    }
  
	    button:hover {
	      background-color: #d3b690;
	      color: #212121;
	    }
		
		#play {
		    cursor: pointer;
		}
		
		a:link{color:#db9c42;}
		a:visited{color:#757541;}
		a:hover{color:#d3b690;}
		
		*{
			//outline: 1px solid red;
		}
		
    </style>
</head>
<body>
	
	<div style="display:flex;flex-direction:row;padding: 20px 0;">
		<div style="display: flex;align-items: center;"><img src="ubc.png" width="100px"></div>
		
		<div style="margin-left:20px">
			<h2>LA Team Ready to Work Map</h2>
			
			<p>The data in this map is pulled from the Ready to Work list available on <a href="https://www.flowcode.com/page/carpenterslocal213">Local 213's flowcode</a>. It is current as of <strong>3/22/24</strong>. If you encounter errors or have design feedback, contact me at <a href="mailto:sophiafosterdimino@gmail.com">sophiafosterdimino@gmail.com</a>.</p>
			
		</div>
	</div>
	
    <div id="map"></div>
	
	<div style="display:flex;flex-direction:row;">
		
		<div style="display: flex;flex-direction: column;justify-content: space-around;"><button onclick="checkAll()">check all</button><button onclick="uncheckAll()">uncheck all</button></div>
		
		<div id="tags" style="padding-left:20px"></div>

	</div>
	
	<div style="margin:auto;text-align:right;"><img src="peon.gif" id="play">
	<audio id="audioPlayer">
		<source src="ready-to-work.mp3" type="audio/mpeg">
	</audio>
	</div>

    <script>
		
		const mapdata = [
			{
			"contractor": "JAMOROSO CONSTRUCTION CO LLC",
			"address": "410 Center Street, Los Angeles, CA, 90012",
			"type": ["Commercial - Concrete", "General Contractor"],
			},
			{
			"contractor": "S JAMOROSO CONSTRUCTION CO LLC",
			"address": "4168 West Avenue 42, Los Angeles, CA, 90065",
			"type": ["Commercial - Concrete", "General Contractor"],
			},
			{
			"contractor": "ANNING - JOHNSON COMPANY",
			"address": "4701 South Santa Fe Avenue, Vernon, ,",
			"type": ["Drywall", "Drywall Com"],
			},
			{
			"contractor": "ARTCRAFTERS CABINETS",
			"address": "1500 North El Centro Avenue, Los Angeles, CA, 90028",
			"type": ["Cabinet Installation", "Millwork Installation"],
			},
			{
			"contractor": "BAYLEY CONSTRUCTION",
			"address": "8500 Beverly Boulevard, Los Angeles, CA, 90048",
			"type": ["Commercial - Concrete"],
			},
			{
			"contractor": "Best Interiors",
			"address": "1741 East 120th Street, Los Angeles, CA, 90059",
			"type": ["Drywall", "Drywall Com", "Metal Stud/Framing"],
			},
			{
			"contractor": "Best Interiors",
			"address": "150 North Orange Grove Boulevard, Pasadena, CA, 91103",
			"type": ["Acoustical", "Drywall", "Drywall Com", "Metal Stud/Framing"],
			},
			{
			"contractor": "GONSALVES & SANTUCCI INC dba CONCO",
			"address": "510 West 6th Street, Los Angeles, CA, 90014",
			"type": ["Commercial - Concrete", "Concrete - Horizontal Decks", "Concrete - VerticalConcrete", "General Contractor"],
			},
			{
			"contractor": "DAVCAL INC",
			"address": "1200 North State Street, Los Angeles, CA, 90033",
			"type": ["Drywall", "Drywall Com", "Metal Stud/Framing"],
			},
			{
			"contractor": "G & G DOOR PRODUCTS INC",
			"address": "312 North Juanita Avenue, Los Angeles, CA, 90004",
			"type": ["Commercial - Concrete"],
			},
			{
			"contractor": "G & G DOOR PRODUCTS INC",
			"address": "318 North Juanita Avenue, Los Angeles, CA, 90004",
			"type": ["Door Com"],
			},
			{
			"contractor": "G & G DOOR PRODUCTS INC",
			"address": "318 N. Juanita Ave., Los Angeles, CA, 90004",
			"type": ["Commercial - Concrete"],
			},
			{
			"contractor": "GRANI INSTALLATION INC",
			"address": "350 South Grand Avenue, Los Angeles, CA, 90071",
			"type": ["Acoustical"],
			},
			{
			"contractor": "INFINITY DRYWALL CONTRACTING INC",
			"address": "5231 Colfax Avenue, Los Angeles, CA, 91601",
			"type": ["Drywall", "Drywall Com", "Lath/Plaster/EIFS", "Metal Framing"],
			},
			{
			"contractor": "JOHN JORY CORPORATION",
			"address": "5500 Hollywood Blvd., Los Angeles,",
			"type": ["Drywall", "Drywall Com", "Metal Stud/Framing"],
			},
			{
			"contractor": "KAISER FOUNDATION HEALTH PLANINC",
			"address": "4950 Sunset Blvd, Los Angeles, CA, 90027",
			"type": ["Drywall Com"],
			},
			{
			"contractor": "KEENAN HOPKINS SUDER & STOWELL CONTRACTORS INC DBA (KHS&S)",
			"address": "3800 South Vermont Avenue, Los Angeles, CA, 90037",
			"type": ["Drywall", "Drywall Com", "Precast Concrete"],
			},
			{
			"contractor": "KEENAN HOPKINS SUDER & STOWELL CONTRACTORS INC DBA (KHS&S)",
			"address": "555 Crocker Street, Los Angeles, CA, 90013",
			"type": ["Commercial - Concrete", "Drywall", "Drywall Com", "Other"],
			},
			{
			"contractor": "WS KLEM CONTRACTOR INCORPORATED",
			"address": "3501 North Broadway, Los Angeles, ,",
			"type": ["Commercial - Concrete"],
			},
			{
			"contractor": "LARGO CONCRETE INC",
			"address": "1950 Avenue of the Stars, Los Angeles, CA, 90067",
			"type": ["Commercial - Concrete"],
			},
			{
			"contractor": "LARGO CONCRETE INC",
			"address": "5905 Wilshire Blvd, Los Angeles, CA, 90036",
			"type": ["Commercial - Concrete"],
			},
			{
			"contractor": "LARGO CONCRETE INC",
			"address": "5420 Sunset Boulevard, Los Angeles, CA, 90027",
			"type": ["Commercial - Concrete"],
			},
			{
			"contractor": "LARGO CONCRETE INC",
			"address": "3452 East Foothill Boulevard, Pasadena, ,",
			"type": ["Commercial - Concrete"],
			},
			{
			"contractor": "MIRAGE BUILDERS INC",
			"address": "1447 East 45th Street, Los Angeles, CA, 90011",
			"type": ["Drywall", "Drywall Com", "Lath/Plaster/EIFS", "Scaffold"],
			},
			{
			"contractor": "THE NEVELL GROUP INC DBA NGI",
			"address": "312 North Record Avenue, Los Angeles,",
			"type": ["Commercial - Acoustical", "Commercial - Framing", "Commercial - Lathe", "Dry Fin Com", "Drywall", "Drywall Com", "Insulation", "Plaster", "Scaffold"],
			},
			{
			"contractor": "ONYX BUILDING GROUP INC",
			"address": "8101 Rosemead Boulevard, Pico Rivera, ,",
			"type": ["Drywall Com"],
			},
			{
			"contractor": "PACIFIC WALL SYSTEMS INC",
			"address": "2244 Walnut Grove Avenue, Rosemead, CA, 91770",
			"type": ["Drywall"],
			},
			{
			"contractor": "PACIFIC WALL SYSTEMS INC",
			"address": "1025 West 34th Street, Los Angeles, ,",
			"type": ["Dry Fin Com", "Drywall", "Drywall Com", "Metal Stud/Framing"],
			},
			{
			"contractor": "CHARLES PANKOW BUILDERS LTD",
			"address": "600 San Pedro Street, Los Angeles, ,",
			"type": ["Commercial - Concrete", "General Contractor"],
			},
			{
			"contractor": "EXCEL CONTRACTORS INC DBA PROGRESSION DRYWALL CORP",
			"address": "1025 North Vermont Avenue, Los Angeles, CA, 90029",
			"type": ["Dry Fin Com", "Drywall", "Drywall Com", "Residential - Drywall"],
			},
			{
			"contractor": "EXCEL CONTRACTORS INC DBA PROGRESSION DRYWALL CORP",
			"address": "113 South Soto Street, Los Angeles, CA, 90033",
			"type": ["Drywall", "Drywall Com", "Metal Stud/Framing", "Residential - Drywall"],
			},
			{
			"contractor": "EXCEL CONTRACTORS INC DBA PROGRESSION DRYWALL CORP",
			"address": "1141 Crenshaw Boulevard, Los Angeles, CA, 90019",
			"type": ["Drywall", "Metal Stud/Framing", "Residential - Drywall"],
			},
			{
			"contractor": "EXCEL CONTRACTORS INC DBA PROGRESSION DRYWALL CORP",
			"address": "707 North Alvarado Street, Los Angeles, CA, 90026",
			"type": ["Drywall", "Residential - Drywall"],
			},
			{
			"contractor": "EXCEL CONTRACTORS INC DBA PROGRESSION DRYWALL CORP",
			"address": "103 North Chapel Avenue, Alhambra, CA, 91801",
			"type": ["Drywall", "Drywall Com"],
			},
			{
			"contractor": "QUALITY PRODUCTION SERVICES INC DBA QPS",
			"address": "312 North Juanita Avenue, Los Angeles, CA, 90004",
			"type": ["Drywall", "Metal Stud/Framing"],
			},
			{
			"contractor": "RUDOLPH & SLETTEN INC",
			"address": "1500 East Duarte Road, Duarte, ,",
			"type": ["Commercial - Concrete"],
			},
			{
			"contractor": "SCHMITT CONTRACTING INC",
			"address": "6020 Miles Avenue, Huntington Park,",
			"type": ["Commercial - Concrete", "Commercial - Framing", "Commercial - Lathe", "Concrete - Flatwork", "Dry Fin Com", "Drywall", "Drywall Com", "Insulation Commercial", "Plaster"],
			},
			{
			"contractor": "SCHMITT CONTRACTING INC",
			"address": "5905 Wilshire Boulevard, Los Angeles, ,",
			"type": ["Drywall"],
			},
			{
			"contractor": "SHARPE INTERIOR SYSTEMS INC",
			"address": "19148 Jamboree Rd, Irvine, CA, 92612",
			"type": ["Commercial - Framing", "Commercial - Lathe", "Dry Fin Com", "Drywall", "Drywall Com", "Plaster"],
			},
			{
			"contractor": "SHARPE INTERIOR SYSTEMS INC",
			"address": "400 South Hope Street, Los Angeles, ,",
			"type": ["Drywall"],
			},
			{
			"contractor": "Standard Drywall Inc",
			"address": "601 Pico Boulevard, Santa Monica, CA, 90405",
			"type": ["Drywall", "Drywall Com"],
			},
			{
			"contractor": "Standard Drywall Inc",
			"address": "601 Pico Boulevard, Santa Monica, CA, 90405",
			"type": ["Dry Fin Com", "Drywall", "Drywall Com", "Metal Stud/Framing"],
			},
			{
			"contractor": "STAR HARDWARE INC",
			"address": "3556 Whittier Boulevard, Los Angeles, ,",
			"type": ["Commercial - Concrete", "Doors & Hardware"],
			},
			{
			"contractor": "Swinerton Builders",
			"address": "555 Crocker Street, Los Angeles, CA, 90013",
			"type": ["Commercial - Concrete", "Concrete - VerticalConcrete", "Dry Fin Com", "Drywall", "Drywall Com", "Metal Stud/Framing", "Millwork Installation"],
			},
			{
			"contractor": "Swinerton Builders",
			"address": "9908 South Santa Monica Boulevard, Beverly Hills, ,",
			"type": ["Commercial - Cabinets", "Commercial - Concrete", "Drywall", "Drywall Com", "General Contractor", "Metal Framing", "Residential - Drywall"],
			},
			{
			"contractor": "Swinerton Builders",
			"address": "9420 Telstar Avenue, El Monte, ,",
			"type": ["Commercial - Concrete", "Drywall", "Drywall Com", "General Contractor"],
			},
			{
			"contractor": "TARLTON AND SON INC",
			"address": "312 North Juanita Avenue, Los Angeles, CA, 90004",
			"type": ["Drywall"],
			},
			{
			"contractor": "TRENDEX CORP",
			"address": "601 South Figueroa Street, Los Angeles, CA, 90017",
			"type": ["Drywall", "Metal Stud/Framing"],
			},
			{
			"contractor": "JTWIMSATT CONTRACTING CO INC",
			"address": "3401 South La Cienega Boulevard, Los Angeles, CA, 90016",
			"type": ["Commercial - Concrete"],
			},
			{
			"contractor": "AP CONSTRUCTION GROUP INC DBA AIR PLUS",
			"address": "450 North Grand Avenue, Los Angeles, CA, 90012",
			"type": ["Drywall", "Plaster"],
			},
			{
			"contractor": "INLINE DRYWALL (CALIFORNIA) INC",
			"address": "1002 South Hill Street, Los Angeles, ,",
			"type": ["Acoustical", "Drywall", "Drywall Com"],
			},
			{
			"contractor": "AMERICAN NATIONAL INSULATION DBA COAST BUILDING PRODUCTS",
			"address": "3000 West Olympic Boulevard, Los Angeles, CA, 90006",
			"type": ["Insulation"],
			},
			{
			"contractor": "Performance Contracting Inc",
			"address": "9000 Wilshire Boulevard, Beverly Hills, ,",
			"type": ["Acoustical", "Bathrooms", "Commercial - Acoustical", "Drywall"],
			},
			{
			"contractor": "NOVA DRYWALL SYSTEMS INC DBA NOVA SYSTEMS",
			"address": "525 South Santa Fe Ave., Los Angeles, CA, 90013",
			"type": ["Drywall", "Drywall Com", "Residential - Drywall"],
			},
			{
			"contractor": "SKANSKA-TRAYLOR SHEA A JOINT VENTURE",
			"address": "711 South La Brea Avenue, Los Angeles, CA, 90036",
			"type": ["Commercial - Concrete", "Concrete - Horizontal Decks", "Concrete Residential"],
			},
			{
			"contractor": "SKANSKA A-TRAYLOR - - SHEA A JOINT VENTURE",
			"address": "8401 North Gale Drive, Beverly Hills, CA, 90211",
			"type": ["Commercial - Concrete"],
			},
			{
			"contractor": "Jilk Heavy Construction Inc",
			"address": "8281 Mulholland Drive, Los Angeles, CA, 90046",
			"type": ["General Contractor"],
			},
			{
			"contractor": "ELLIOTT. / DRINKWARD CONSTRUCTION INC DBA ELLIOTT DRINKWARD CONSTRUCTION INC",
			"address": "9800 Grape Street, Los Angeles, CA, 90002",
			"type": ["Wood Framing"],
			},
			{
			"contractor": "ELLIOTT / DRINKWARD CONSTRUCTION INC DBA ELLIOTT DRINKWARD CONSTRUCTION INC",
			"address": "1025 North Vermont Avenue, Los Angeles, CA, 90029",
			"type": ["Wood Framing"],
			},
			{
			"contractor": "ELLIOTT / DRINKWARD CONSTRUCTION INC DBA ELLIOTT DRINKWARD CONSTRUCTION INC",
			"address": "800 West 85TH ST, Los Angeles, ,",
			"type": ["Commercial - Concrete", "Wood Framing"],
			},
			{
			"contractor": "ELLIOTT / DRINKWARD CONSTRUCTION INC DBA ELLIOTT DRINKWARD CONSTRUCTION INC",
			"address": "113 South Soto Street, Los Angeles, CA, 90033",
			"type": ["Commercial - Concrete", "Wood Framing"],
			},
			{
			"contractor": "ELLIOTT / DRINKWARD CONSTRUCTION INC DBA ELLIOTT DRINKWARD CONSTRUCTION INC",
			"address": "4020 Compton Avenue, Los Angeles, CA, 90011",
			"type": ["Commercial - Concrete", "Concrete - Residential", "Wood Framing"],
			},
			{
			"contractor": "ELLIOTT / DRINKWARD CONSTRUCTION INC DBA ELLIOTT DRINKWARD CONSTRUCTION INC",
			"address": "837 North Banning Boulevard, Los Angeles, ,",
			"type": ["Concrete - Residential", "Wood Framing"],
			},
			{
			"contractor": "ELLIOTT / DRINKWARD CONSTRUCTION INC DBA ELLIOTT DRINKWARD CONSTRUCTION INC",
			"address": "707 North Alvarado Street, Los Angeles, CA, 90026",
			"type": ["Framing Residential", "Wood Framing"],
			},
			{
			"contractor": "ELLIOTT / DRINKWARD CONSTRUCTION INC DBA ELLIOTT DRINKWARD CONSTRUCTION INC",
			"address": "103 North Chapel Avenue, Alhambra, CA, 91801",
			"type": ["Wood Framing"],
			},
			{
			"contractor": "ELLIOTT / DRINKWARD CONSTRUCTION INC DBA ELLIOTT DRINKWARD CONSTRUCTION INC",
			"address": "11730 Ramona Boulevard, El Monte, CA, 91732",
			"type": ["Wood Framing"],
			},
			{
			"contractor": "ELLIOTT / DRINKWARD CONSTRUCTION INC DBA ELLIOTT DRINKWARD CONSTRUCTION INC",
			"address": "7616 Pacific Boulevard, Huntington Park, CA, 90255",
			"type": ["Framing Residential", "Wood Framing"],
			},
			{
			"contractor": "TUTOR PERINI CORPORATION",
			"address": "10971 Wilshire Boulevard, Los Angeles, CA, 90024",
			"type": ["Commercial - Concrete"],
			},
			{
			"contractor": "MARTIN BROS/MARCOWALL INC",
			"address": "1840 Century Park East, Los Angeles, CA, 90067",
			"type": ["Drywall", "Drywall Com"],
			},
			{
			"contractor": "INTERIOR PLUS INC",
			"address": "501 South Marengo Avenue, Alhambra, CA, 91803",
			"type": ["Acoustical", "Doors & Hardware", "Dry Fin Com", "Drywall", "Drywall Com", "General Contractor", "Metal Stud/Framing"],
			},
			{
			"contractor": "Stacy and Witbeck Inc",
			"address": "6001 Forest Lawn Drive, Los Angeles, CA, 90068",
			"type": ["Commercial - Concrete", "Concrete - VerticalConcrete"],
			},
			{
			"contractor": "INDUSTRY DRYWALL & FRAMING INC DBA INDUSTRY DRYWALL & METAL STUD FRAMING",
			"address": "1024 North Orange Drive, Los Angeles, CA, 90038",
			"type": ["Drywall", "Metal Stud/Framing"],
			},
			{
			"contractor": "Jordan Drywall Inc",
			"address": "5500 Hollywood Blvd., Los Angeles, ,",
			"type": ["Drywall", "Metal Stud/Framing"],
			},
			{
			"contractor": "TPOGJV/Tutor Perini",
			"address": "2040 Century Park East, Los Angeles, CA, 90067",
			"type": ["Commercial - Concrete", "General Contractor", "Heavy-Highway-Bridge"],
			},
			{
			"contractor": "TPOGJV/Tutor Perini",
			"address": "10971 Wilshire Boulevard, Los Angeles, CA, 90024",
			"type": ["Commercial - Concrete", "General Contractor", "PileDriving"],
			},
			{
			"contractor": "Very Good Building & Construction",
			"address": "6642 Rego Park Court, Las Vegas, NV, 89166",
			"type": ["General Contractor"],
			},
			{
			"contractor": "WEBCOR CRAFT L P",
			"address": "1002 South Hill Street, Los Angeles, ,",
			"type": ["Commercial - Concrete"],
			},
			{
			"contractor": "CML SPECIALTIES LLC",
			"address": "201 Centre Plaza Drive, Monterey Park, CA, 91754",
			"type": ["Acoustical", "Commercial - Concrete"],
			},
			{
			"contractor": "Lincoln Hall Company Inc. dba Lincoln Hall Painting",
			"address": "823 1/2 North Cahuenga Boulevard, Los Angeles, ,",
			"type": ["Acoustical", "Commercial - Acoustical"],
			},
			{
			"contractor": "Domestic Rail Solutions Corp",
			"address": "11500 Wilshire, Los Angeles, CA, 90025",
			"type": ["Other"],
			},
			{
			"contractor": "The Conco Companies",
			"address": "510 West 6th Street, Los Angeles, CA, 90014",
			"type": ["Commercial - Concrete"],
			},
			{
			"contractor": "Fixed Dimensions dba Fixed Dimensions Carpentry",
			"address": "200 Mesnagers Street, Los Angeles, CA, 90012",
			"type": ["Cabinet Installation", "Commercial - Concrete"],
			},
			{
			"contractor": "Elljay Acoustics Inc",
			"address": "533 South Fremont Avenue, Los Angeles, CA, 90071",
			"type": ["Commercial - Acoustical"],
			},
			{
			"contractor": "RAYMOND-STANDARD A JOINT VENTURE",
			"address": "3950 West Century Boulevard, Inglewood, ,",
			"type": ["Drywall", "Insulation", "Metal Stud/Framing", "Taping", "Wood Framing"],
			},
			{
			"contractor": "Parkco Construction Inc.",
			"address": "619 South Ardmore Avenue, Los Angeles, ,",
			"type": ["Commercial - Concrete"],
			}
		]
		
		const locals = [
		        {
					"local": "213",
					"address": "1200 Corporate Center Drive, 3rd Floor, Monterey Park, CA 91754"
				},
		        {
					"local": "323",
					"address": "1010 Sandhill Ave, Carson, CA 90746"
				},
		        {
					"local": "562",
					"address": "341 East Wardlow Road, Long Beach, CA 90807"
				},
		        {
					"local": "661",
					"address": "15881 Valley View Court, Sylmar, CA 91342"
				},
		        {
					"local": "714",
					"address": "7111 Firestone Boulevard, #122, Buena Park, CA 90621"
				},
		        {
					"local": "721",
					"address": "10015 Rose Hills Road, #100, Whittier, CA 90601"
				},
		        {
					"local": "743",
					"address": "911 20th Street, 911 20th Street, Bakersfield, CA, USA, Bakersfield, CA 93301"
				},
		        {
					"local": "951",
					"address": "6147 River Crest Drive, Riverside, CA 92507"
				},
		        {
					"local": "743",
					"address": "911 20th Street, 911 20th Street, Bakersfield, CA, USA, Bakersfield, CA 93301"
				}
		    ];
		
		console.log(mapdata.length + " sites");
			
		var map;
		var markers = [];

		// initialize the map
		function initMap() {
		    map = new google.maps.Map(document.getElementById('map'), {
		        center: {lat: 34.05, lng: -118.255},
		        zoom: 10
		    });
			
		    parseAndPlotMarkers();
			addlocals();
		}
		
		// add locals
		function addlocals(){
			console.log("adding locals...")
		    locals.forEach(function(entry) {
				console.log("attempting"+ entry.local);
				var geocoder = new google.maps.Geocoder();
		        geocoder.geocode({'address': entry.address}, function(results, status) {
		            if (status === 'OK') {
		                var location = results[0].geometry.location;
        
		                var marker = new google.maps.Marker({
							position: location,
							map: map,
							icon: {
							        path: google.maps.SymbolPath.BACKWARD_OPEN_ARROW,
							        fillColor: 'blue',
							        fillOpacity: 1,
							        strokeColor: 'blue',
							        strokeWeight: 1,
							        scale: 8
							    },
								title: entry.local
		                });
						
						var infowindow = new google.maps.InfoWindow({
							content: entry.local
						});
						
						marker.addListener('click', function() {
							infowindow.open(map, marker);
						});
						
						console.log("success");
						
		            } else {
		                console.error('Geocode was not successful for the following reason: ' + status);
		            }
		        });
		    });
		}
		
		// put markers in
		function parseAndPlotMarkers() {
			mapdata.forEach(function(entry) {
				// use geocoding api to get longitude and latitude
				var geocoder = new google.maps.Geocoder();
				geocoder.geocode({
					'address': entry.address
				}, function(results, status) {
					if (status === 'OK') {
						var location = results[0].geometry.location;
						
						var marker = new google.maps.Marker({
							position: location,
							map: map,
							title: entry.contractor,
							type: entry.type
						});

						// popup html
						var contentString = '<div><strong>' + entry.contractor + '</strong><br>' + entry.address + '<br><ul>';
						entry.type.forEach(function(workType) {
							contentString += '<li>' + workType + '</li>';
						});
						contentString += '</ul></div>';

						// attach click listener to the marker to show details when clicked
						var infowindow = new google.maps.InfoWindow({
							content: contentString
						});
						marker.addListener('click', function() {
							// close all currently open popups before opening a new one
							markers.forEach(function(existingMarker) {
								existingMarker.infowindow.close();
							});
							// open the popup for the clicked marker
							infowindow.open(map, marker);
						});

						// store marker reference for toggling later
						markers.push({
							marker: marker,
							infowindow: infowindow
						});
					} else {
						console.error('Geocode was not successful for the following reason: ' + status);
					}
				});
			});
		}
		
		// make checkboxes
		function generateCheckboxes() {
			var uniqueTypes = new Set();

			    // loop through each job site entry in the data
			    mapdata.forEach(function(entry) {
			        entry.type.forEach(function(workType) {
			            uniqueTypes.add(workType); // add each type of work to the set
			        });
			    });

			    // convert the set to an array
			    var allTypes = Array.from(uniqueTypes);

			    // generate checkboxes for each type of work
			    var checkboxesContainer = document.getElementById('tags');
			    allTypes.forEach(function(workType) {
			        var checkbox = document.createElement('input');
			        checkbox.type = 'checkbox';
			        checkbox.value = workType;
			        checkbox.checked = true; // Checked by default
			        checkbox.id = 'checkbox_' + workType.replace(/\s/g, '_');
			        var label = document.createElement('label');
			        label.appendChild(checkbox);
			        label.appendChild(document.createTextNode(workType));
			        checkboxesContainer.appendChild(label);
        
			        // add event listener to checkboxes to toggle markers
			        checkbox.addEventListener('change', function() {
			            toggleMarkers();
			        });
			    });
		}
		
		window.addEventListener('load', generateCheckboxes);
		
		function toggleMarkers() {
		    // get all checked checkboxes
		    var checkedCheckboxes = document.querySelectorAll('#tags input[type="checkbox"]:checked');
		    var checkedTypes = Array.from(checkedCheckboxes).map(function(checkbox) {
		        return checkbox.value;
		    });

		    // track which markers are currently visible
		    var visibleMarkers = new Set();

		    // loop through all markers
		    markers.forEach(function(markerData) {
		        var marker = markerData.marker;
		        var infowindow = markerData.infowindow;
		        var isVisible = false;

		        // check if the marker's types intersect with the checked types
		        if (marker.type.some(type => checkedTypes.includes(type))) {
		            isVisible = true;
		            visibleMarkers.add(marker); // add marker to visible markers set
		        }

		        // show or hide the marker based on visibility
		        marker.setVisible(isVisible);

		        // close the infowindow associated with the marker
		        infowindow.close();
		    });

		    // check if any previously visible markers are no longer visible
		    markers.forEach(function(markerData) {
		        var marker = markerData.marker;

		        // if a previously visible marker is no longer visible
		        if (!visibleMarkers.has(marker)) {
		            // check if any other checked checkboxes still match the marker's types
					// convert nodelist to array
					var checkedCheckboxesArray = Array.from(checkedCheckboxes);

					// check if any other checked checkboxes still match the marker's types
					var hasMatchingCheckbox = checkedCheckboxesArray.some(function(checkbox) {
					    return marker.type.includes(checkbox.value);
					});

		            // if no other checked checkboxes match the marker's types, hide the marker
		            if (!hasMatchingCheckbox) {
		                marker.setVisible(false);
		            }
		        }
		    });
		}
		
		function checkAll() {
		    document.querySelectorAll('#tags input[type="checkbox"]').forEach(function(checkbox) {
		        checkbox.checked = true;
		        toggleMarkers(checkbox.value);
		    });
		}

		function uncheckAll() {
		    document.querySelectorAll('#tags input[type="checkbox"]').forEach(function(checkbox) {
		        checkbox.checked = false;
		        toggleMarkers(checkbox.value);
		    });
		}
		
        var playButton = document.getElementById('play');
		
        var audioPlayer = document.getElementById('audioPlayer');
		
        playButton.addEventListener('click', function() {
            audioPlayer.play();
        });
        
    </script>

    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDsRfnkiV2jKntdBPNp8eNIelohLCLUXw4&callback=initMap">
		
    </script>
		
</body>
</html>